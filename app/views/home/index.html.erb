
<script type="text/javascript">
  $(function() {
    $(".join-championship").on("click", function(e){
        console.log("skdlksldksl")
        var championshipId = $(e.target).data("championship")
        $.ajax({
        url: "http://127.0.0.1:3000/championships/"+championshipId+"/players.json",
        type: "POST",
        data: {player: {identity: "<%= @player_info.identity %>", name: "<%= @player_info.name %>", defence_length: <%=@player_info.defence_set_length %>, host: "<%= @player_info.host %>", port: "<%= @player_info.port %>", path: "<%=@player_info.path %>"}},
        success: function(data){
          
        },error: function(data) {
          alert(data.responseJSON.errors.identity)
        },
        dataType: "json"
      });   
              
    
    });
    
  });
</script>

<h1 style="text-align:center">Championships</h1>

<div class="col-sm-6" style="margin:auto;float:none">
  <table id="championships" class="table table-striped">
  <thead>
    <tr>
      <th> Title </th>
      <th> Status </th>
      <th>  Action</th>            
    </tr>
  </thead>
  <tbody>
    <% @championships.each do |data| %>
      <tr>
        <td><%= data["title"]%></td>
        <td><%= data["status"]%></td>
        <% if data["status"] == "open" %>
          <td><button class="pull-left col-sm-5 btn btn-success join-championship"  data-championship="<%= data['id']%>">Join</button></td>
        <%else%>
          <td></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
  
</table>
  
    
</div>